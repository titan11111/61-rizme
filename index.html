<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover, maximum-scale=1.0" />
<title>リズムバトル × アクション棒人間</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<audio id="bgm" preload="auto" loop></audio>

<div id="scene-start" class="scene active">
  <div class="wrap">
    <div class="card center">
      <div>
        <div class="pill">Rhythm × Action</div>
        <h1 class="title">リズムバトル：棒人間でパンチ・キック・ジャンプ</h1>
        <p class="subtitle">ノートに合わせて技を出してボスを倒そう！</p>

        <div class="row" style="justify-content:center;margin:10px 0 6px;gap:10px">
          <label class="pill"><input type="radio" name="diff" value="easy"> EASY</label>
          <label class="pill"><input type="radio" name="diff" value="normal" checked> NORMAL</label>
          <label class="pill"><input type="radio" name="diff" value="hard"> HARD</label>
        </div>

        <div class="row" style="justify-content:center;margin:12px 0 6px">
          <button id="btnStart">はじめる</button>
          <button id="btnHow">あそびかた</button>
        </div>
        <p class="subtitle">キーボード: <span class="kbd">D</span>=パンチ / <span class="kbd">F</span>=キック / <span class="kbd">Space</span>=ジャンプ</p>
      </div>
    </div>
    <div id="how" class="card" style="display:none;margin-top:14px">
      <b>あそびかた</b>
      <ol>
        <li>落ちてくるノートが判定ラインに来たら、対応する技のボタンを押そう</li>
        <li>パーフェクトなタイミングでヒットすると大ダメージ！</li>
        <li>連続でヒットするとコンボが上がってボーナス得点</li>
        <li>ボスのHPを0にしてクリアを目指そう</li>
      </ol>
    </div>
  </div>
</div>

<div id="scene-play" class="scene">
  <div class="wrap">
    <div id="hud">
      <div class="stat"><span>スコア</span> <b id="score">0</b></div>
      <div class="stat"><span>コンボ</span> <b id="combo">0</b></div>
      <div class="stat"><span>判定</span> <b id="judge">-</b></div>
      <div id="gaugeWrap" class="stat" style="flex:1"><span>ボスHP</span>
        <div id="hpbar"><i style="width:100%"></i></div>
      </div>
      <div class="stat"><span>のこり</span> <b id="timeLeft">--</b></div>
    </div>

    <div id="stage">
      <div id="fight" class="card">
        <canvas id="gameCanvas" aria-label="stickman stage"></canvas>
        <div class="hit" id="hitFx"></div>
      </div>

      <div id="lanes" class="card">
        <div class="lane" data-lane="0"><div class="label">パンチ <span class="kbd">D</span></div><div class="hitline"></div><div class="spark"></div></div>
        <div class="lane" data-lane="1"><div class="label">キック <span class="kbd">F</span></div><div class="hitline"></div><div class="spark"></div></div>
        <div class="lane" data-lane="2"><div class="label">ジャンプ <span class="kbd">Space</span></div><div class="hitline"></div><div class="spark"></div></div>
      </div>
    </div>

    <div id="controls" class="row">
      <button class="ctl" data-lane="0">パンチ</button>
      <button class="ctl" data-lane="1">キック</button>
      <button class="ctl" data-lane="2">ジャンプ</button>
    </div>
  </div>
</div>

<div id="scene-result" class="scene">
  <div class="wrap center">
    <div class="card">
      <div class="big" id="resultTitle">ステージ クリア</div>
      <div class="result-grid">
        <div class="result-item">PERFECT<br><b id="rPerfect">0</b></div>
        <div class="result-item">GREAT<br><b id="rGreat">0</b></div>
        <div class="result-item">GOOD<br><b id="rGood">0</b></div>
        <div class="result-item">MISS<br><b id="rMiss">0</b></div>
      </div>
      <div class="rank" id="rRank">S</div>
      <div class="row" style="justify-content:center;margin-top:8px">
        <button id="toEnding">エンディングへ</button>
        <button id="retry">リトライ</button>
      </div>
    </div>
  </div>
</div>

<div id="scene-ending" class="scene">
  <div class="wrap center">
    <div class="card ending">
      <div class="big">ありがとう</div>
      <p>技のリズムが街じゅうに広がった。泣いていた子も笑って、みんなで手をたたく。敵だったはずの相手も、いつのまにか一緒にステップを踏んでいる。</p>
      <p>音楽は、こころをつなぐ魔法。きょうのヒーローは、きみ。</p>
      <div class="row" style="justify-content:center;margin-top:8px">
        <button id="restart">タイトルへ</button>
      </div>
    </div>
  </div>
</div>

<script src="script.js"></script>
</body>
</html>
